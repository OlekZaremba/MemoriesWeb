<div class="main">
  <div class="content">
    <div class="grades">
      <div class="tile">
        <h2>Użytkownicy</h2>

        <!-- Widok STUDENTA -->
        <div class="student-grades-table" *ngIf="userRole === 'S'">
          <table class="subjects-table">
            <thead>
            <tr>
              <th>Imię i nazwisko nauczyciela</th>
              <th>Przedmiot wiodący</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let teacher of teachersForStudent">
              <td>{{ teacher.name }} {{ teacher.surname }}</td>
              <td>–</td>
            </tr>
            </tbody>
          </table>
        </div>

        <!-- Widok NAUCZYCIELA -->
        <div class="student-grades-table" *ngIf="userRole === 'T'">
          <table class="subjects-table">
            <thead>
            <tr>
              <th>Klasa</th>
              <th>Akcja</th>
            </tr>
            </thead>
            <tbody>
            <tr *ngFor="let group of teacherGroups">
              <td>{{ group.groupName }}</td>
              <td><button class="goToGrade" (click)="goToGroupUsersView()">Przeglądaj</button></td>
            </tr>
            </tbody>
          </table>
        </div>

        <!-- Widok ADMINISTRATORA -->
        <div *ngIf="userRole === 'A'">
          <div class="teacher-control-buttons">
            <button (click)="openCreateModal()">Dodaj użytkownika</button>
            <input
              type="text"
              placeholder="Wpisz nazwę użytkownika"
              class="user-search-input"
              [(ngModel)]="searchTerm"
            />
          </div>

          <div class="student-grades-table">
            <table class="subjects-table">
              <thead>
              <tr>
                <th>Imię</th>
                <th>Nazwisko</th>
                <th>Grupy</th>
                <th>E-mail</th>
                <th>Rola</th>
                <th>Resetuj hasło</th>
                <th>Przypisz do grupy</th>
                <th>Edycja użytkownika</th>
              </tr>
              </thead>
              <tbody>
              <tr *ngFor="let user of filteredUsers()">
                <td>{{ user.name }}</td>
                <td>{{ user.surname }}</td>
                <td>–</td> <!-- Możesz uzupełnić w przyszłości -->
                <td>–</td> <!-- Możesz uzupełnić w przyszłości -->
                <td>{{ mapRole(user.role) }}</td>
                <td>
                  <button class="goToGrade" (click)="openResetModal(user.email)">Resetuj</button>
                </td>
                <td>
                  <button class="goToGrade" (click)="openAssignModal(user.name + ' ' + user.surname)">Przypisz</button>
                </td>
                <td>
                  <button class="goToGrade" (click)="prepareUserForEdit(user)">Edytuj</button>
                </td>
              </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
