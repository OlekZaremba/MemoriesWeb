<div class="grades">
  <div class="tile">
    <h2>Oceny uczniów - Klasa {{ groupId }}</h2>

    <div class="student-grades-table">
      <table class="subjects-table">
        <thead>
        <tr>
          <th>Uczeń</th>
          <th>Oceny</th>
          <th>Średnia</th>
        </tr>
        </thead>
        <tbody>
        <tr *ngFor="let student of students">
          <td>{{ student.name }} {{ student.surname }}</td>
          <td class="grades-cell">
              <span
                *ngFor="let grade of student.grades"
                class="grade-chip"
                (click)="openModal(grade, student.name + ' ' + student.surname)">
                {{ grade.value }}
              </span>
          </td>
          <td>{{ student.average | number:'1.2-2' }}</td>
        </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

<!-- Modal -->
<div class="modal-backdrop" *ngIf="showModal">
  <div class="modal">
    <h2>Szczegóły oceny</h2>

    <label>Uczeń:</label>
    <input type="text" [value]="selectedGrade.student" disabled />

    <label>Ocena:</label>
    <input type="text" [value]="selectedGrade.value" disabled />

    <label>Typ oceny:</label>
    <input type="text" [value]="selectedGrade.type" disabled />

    <label>Komentarz:</label>
    <textarea [value]="selectedGrade.comment" disabled></textarea>

    <div class="modal-buttons">
      <button (click)="closeModal()">Zamknij</button>
    </div>
  </div>
</div>
